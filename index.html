<html>
  <head>
    <base href="https://websim.creation.engine/ux-research-tool/" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UX Research Card Sorting Exercise</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@800&display=swap");
      :root {
        --accent-color: #007bff;
        --bg-color: #f8f9fa;
        --card-bg: #ffffff;
        --text-color: #333333;
        --border-color: #e0e0e0;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: var(--bg-color);
        color: var(--text-color);
        line-height: 1.6;
      }
      .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px 0;
      }
      .column {
        flex: 1 1 250px;
        min-width: 250px;
        max-width: calc(100% - 40px);
        background-color: var(--card-bg);
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        position: relative;
        margin-bottom: 20px;
      }
      .column h2 {
        margin-top: 0;
        padding: 10px 0;
        color: var(--accent-color);
        font-weight: 500;
        border-bottom: 2px solid var(--accent-color);
      }
      .card {
        background-color: var(--bg-color);
        border: 1px solid var(--border-color);
        border-radius: 6px;
        padding: 12px;
        margin-bottom: 10px;
        cursor: move;
        position: relative;
        transition: box-shadow 0.3s ease;
      }
      .card:hover {
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .card .delete-btn,
      .column .delete-btn {
        position: absolute;
        top: 5px;
        right: 5px;
        background-color: transparent;
        color: #999;
        border: none;
        font-size: 16px;
        cursor: pointer;
        transition: color 0.3s ease;
      }
      .card .delete-btn:hover,
      .column .delete-btn:hover {
        color: #ff4136;
      }
      .controls {
        margin-bottom: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }
      .primary-btn {
        padding: 10px 15px;
        background-color: var(--accent-color);
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        font-weight: 500;
      }
      .primary-btn:hover {
        background-color: #0056b3;
      }
      .secondary-btn {
        padding: 10px 15px;
        background-color: transparent;
        color: var(--accent-color);
        border: 2px solid var(--accent-color);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
      }
      .secondary-btn:hover {
        background-color: var(--accent-color);
        color: white;
      }
      h1 {
        font-family: "Inter", sans-serif;
        font-weight: 800;
        color: var(--accent-color);
        font-weight: 300;
        font-size: 2.5em;
        margin-bottom: 20px;
      }
      #analysisContainer {
        margin-top: 30px;
        background-color: var(--card-bg);
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .chart-container {
        width: 100%;
        height: 600px;
      }
      @media (max-width: 600px) {
        .column {
          flex-basis: 100%;
        }
      }
      input[type="text"] {
        padding: 10px 15px;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        font-size: 16px;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1.1.1/dist/chartjs-chart-matrix.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/csv-stringify@6.5.1/dist/iife/sync.min.js"></script>
  </head>
  <body>
    <h1>UX Research Card Sorting Exercise</h1>

    <div class="controls">
      <input type="text" id="userName" placeholder="Enter your name" required />
      <button id="startExercise" class="primary-btn">Start Exercise</button>
    </div>

    <div id="exerciseContent" style="display: none">
      <div class="controls">
        <button id="addCard" class="secondary-btn">+ Add Card</button>
        <button id="addColumn" class="secondary-btn">+ Add Column</button>
        <button id="saveChoices" class="primary-btn">Save Choices</button>
      
      </div>

      <div class="container" id="container">
        <div class="column" id="cardPool">
          <h2>Card Pool</h2>
          <div class="card" draggable="true">
            Employee Name<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Contact Email<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Work Email<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Contact phone<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Employee Code<button class="delete-btn">
              ×
            </button>
          </div>
<div class="card" draggable="true">
    Taxation Reporting Status<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    IRD Number<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Tax Code<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Special Tax Rate<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Withholding Tax Rate<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Special Student Loan Rate<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    SLBOR<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    SLCIR<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    ACC Levy<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Company Name<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Company Code/Unique Identifier<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Start Date With Company<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Years of Service with the Company<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Position/Title/Role<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Start Date With Position<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Employment Classification (eg. full time)<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Standard Hours Paid<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    KiwiSaver Option - Ability to Opt in or Out<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    KiwiSaver Contribution Percentages<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    ESCT Rate<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Savings Suspension<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Kiwisaver Exempt Income<button class="delete-btn">×</button>
</div>
          <div class="card" draggable="true">
            Bank Account Number<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Emergency Contact Details<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Employment Start Date<button class="delete-btn">×</button>
          </div>
          <div class="card" draggable="true">
            Employment End Date (if applicable)<button class="delete-btn">
              ×
            </button>
          </div>
          <div class="card" draggable="true">
            Employment Contract/Agreement<button class="delete-btn">×</button>
          </div>
<div class="card" draggable="true">
    Annual Leave balance<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Annual Leave total taken<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Annual leave total accrued<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Sick Leave balance/entitlement<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Other Leave taken (e.g., parental, bereavement)<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Regular Working Hours<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Work Pattern Flexibility Arrangements<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Notice Period (if applicable)<button class="delete-btn">×</button>
</div>
<div class="card" draggable="true">
    Severance Pay (If applicable)<button class="delete-btn">×</button>
</div>
        </div>
        <div class="column">
          <h2>Employment Details</h2>
          <button class="delete-btn">×</button>
        </div>
        <div class="column">
          <h2>Personal Details</h2>
          <button class="delete-btn">×</button>
        </div>
        <div class="column">
          <h2>Financial Info</h2>
          <button class="delete-btn">×</button>
        </div>
        <div class="column">
          <h2>KiwiSaver</h2>
          <button class="delete-btn">×</button>
        </div>
        <div class="column">
          <h2>Leave</h2>
          <button class="delete-btn">×</button>
        </div>
      </div>

      <div id="analysisContainer" style="display: none">
        <h2>Statistical Analysis</h2>
        <div class="chart-container">
          <canvas id="heatmapChart"></canvas>
        </div>
      </div>
    </div>

    <script>
  document.addEventListener("DOMContentLoaded", (event) => {
    const userName = document.getElementById("userName");
    const startExerciseBtn = document.getElementById("startExercise");
    const exerciseContent = document.getElementById("exerciseContent");
    const container = document.getElementById("container");
    const addCardBtn = document.getElementById("addCard");
    const addColumnBtn = document.getElementById("addColumn");
    const saveChoicesBtn = document.getElementById("saveChoices");
    const cardPool = document.getElementById("cardPool");
    const analysisContainer = document.getElementById("analysisContainer");

    let draggedItem = null;
    let userChoices = [];

    startExerciseBtn.onclick = function () {
      if (userName.value.trim() !== "") {
        exerciseContent.style.display = "block";
        this.disabled = true;
        userName.disabled = true;
      } else {
        alert("Please enter your name to start the exercise.");
      }
    };

    function createCard(text = "New Card") {
      const card = document.createElement("div");
      card.className = "card";
      card.draggable = true;
      card.textContent = text;

      const deleteBtn = document.createElement("button");
      deleteBtn.className = "delete-btn";
      deleteBtn.textContent = "×";
      deleteBtn.onclick = function (e) {
        e.stopPropagation();
        card.remove();
      };

      card.appendChild(deleteBtn);

      card.addEventListener("dragstart", function () {
        draggedItem = card;
        setTimeout(() => (this.style.opacity = "0.5"), 0);
      });

      card.addEventListener("dragend", function () {
        setTimeout(() => (this.style.opacity = ""), 0);
        draggedItem = null;
      });

      return card;
    }

    function createColumn(title = "New Column") {
      const column = document.createElement("div");
      column.className = "column";

      const heading = document.createElement("h2");
      heading.textContent = title;
      column.appendChild(heading);

      const deleteBtn = document.createElement("button");
      deleteBtn.className = "delete-btn";
      deleteBtn.textContent = "×";
      deleteBtn.onclick = function () {
        column.remove();
      };
      column.appendChild(deleteBtn);

      column.addEventListener("dragover", function (e) {
        e.preventDefault();
        this.style.boxShadow = "0 4px 8px rgba(0, 123, 255, 0.5)";
      });

      column.addEventListener("dragleave", function () {
        this.style.boxShadow = "";
      });

      column.addEventListener("drop", function (e) {
        e.preventDefault();
        if (draggedItem) {
          this.appendChild(draggedItem);
        }
        this.style.boxShadow = "";
      });

      return column;
    }

    addCardBtn.onclick = function () {
      const cardText = prompt("Enter card text:");
      if (cardText) {
        cardPool.appendChild(createCard(cardText));
      }
    };

    addColumnBtn.onclick = function () {
      const columnTitle = prompt("Enter column title:");
      if (columnTitle) {
        container.appendChild(createColumn(columnTitle));
      }
    };

    saveChoicesBtn.onclick = function () {
      const choices = {};
      document.querySelectorAll(".column").forEach((column) => {
        const columnTitle = column.querySelector("h2").textContent;
        choices[columnTitle] = Array.from(column.querySelectorAll(".card")).map(
          (card) => card.textContent.trim()
        );
      });
      userChoices.push(choices);
      console.log("User Choices:", userChoices);
    };

    document.querySelectorAll(".card").forEach((card) => {
      card.addEventListener("dragstart", function () {
        draggedItem = card;
        setTimeout(() => (this.style.opacity = "0.5"), 0);
      });

      card.addEventListener("dragend", function () {
        setTimeout(() => (this.style.opacity = ""), 0);
        draggedItem = null;
      });
    });
  });
</script>
  </body>
</html>
